<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Fortran Programming Language">
    <title>Quickstart Fortran - Fortran Programming Language</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.0/normalize.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="fortran-lang.github.io/assets/css/main.css" rel="stylesheet">
    <link href="fortran-lang.github.io/assets/css/syntax.css" rel="stylesheet">
    <link rel="canonical" href="https://fortran-lang.org/learn/" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <header class="navbar">
    <div class="container">
        <nav class="navbar">
	    <div class="container-fluid">
	    <div class="navbar-header">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu" aria-expanded="false">
		    <span class="sr-only">Toggle navigation</span>
		    <img src="fortran-lang.github.io/assets/img/icons/icon-menu.svg" alt="Toggle navigation" class="navbar-top-align">
		</button>
		<a href="fortran-lang.github.io/" class="navbar-brand">
		    <img src="fortran-lang.github.io/assets/img/fortran_logo_256x256.png" id="navbar-logo" alt="Fortran">
		</a>
	    </div>
	    <div class="collapse navbar-collapse navbar-top-align" id="menu">
	        <ul class="nav navbar-nav navbar-right">
		
		    
		    <li class="current">
		    
		    <a href="fortran-lang.github.io/learn/">Learn</a>
		    
		    </li>
		
		    
		    <li>
		    
		    <a href="fortran-lang.github.io/compilers/">Compilers</a>
		    
		    </li>
		
		    
		    <li>
		    
		    <a href="fortran-lang.github.io/packages">Packages</a>
		    
		    </li>
		
		    
		    <li>
		    
		    <a href="fortran-lang.github.io/news/">News</a>
		    
		    </li>
		
		</ul>
	    </div>
	    </div>
        </nav>
    </div>
</header>


<section class="front-section">
  <div class="container">
    <div class="newsletter col-wide">

      <h1>Quickstart Fortran</h1>

      <div style="margin-top: 0.5em; margin-bottom: 0.5em;">
        <i></i>
        
      </div>

      <p>This quickstart tutorial assumes familiarity with basic programming concepts such as types, variables, arrays, control flow and functions.</p>

<p>On this page:</p>

<ul>
  <li><a href="#compiler-setup">Setting up a Fortran compiler</a></li>
  <li><a href="#hello-world">Hello world program</a></li>
  <li><a href="#variables">Variables, arrays &amp; strings</a></li>
  <li><a href="#operators">Operators</a></li>
  <li><a href="#controlling-program-flow">Controlling program flow (if,loops)</a></li>
  <li><a href="#procedures">Procedures (functions,subroutines)</a></li>
  <li><a href="#modules">Modules</a></li>
</ul>

<h2 id="compiler-setup">Compiler setup</h2>

<div class="aside-note">
    
    <p><strong>Note:</strong> Fortran is a <b>compiled language</b> which means that once written, the source code must be passed through a
compiler to produce a machine executable that can be run.</p>

</div>

<p>In this tutorial, we’ll work with the free and open source 
<a href="https://gcc.gnu.org/fortran/">GNU Fortran compiler (gfortran)</a>, 
which is part of the 
<a href="https://gcc.gnu.org/">GNU Compiler Colection (GCC)</a>.</p>

<p>To install gfortran on Linux, use your system package manager.
Otherwise, for macOS or Windows, refer to gfortran binaries from 
<a href="https://gcc.gnu.org/install/binaries.html">this page</a>.</p>

<p>To check if you have <em>gfortran</em> setup correctly, open a terminal and run the following command :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> gfortran <span class="nt">--version</span>
</code></pre></div></div>

<p>this should output something like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GNU Fortran 7.5.0
Copyright (C) 2017 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</code></pre></div></div>

<h2 id="hello-world">Hello world</h2>

<p>Once you have setup up your compiler, open a new file in your favourite code editor and enter the following:</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">hello</span><span class="w">
  </span><span class="c1">! This is a comment line, it is ignored by the compiler</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Hello, World!'</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">hello</span><span class="w">
</span></code></pre></div></div>

<p>Having saved your program to <code class="highlighter-rouge">hello.f90</code>, compile at the command line with:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> gfortran hello.f90 <span class="nt">-o</span> hello
</code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> .f90 is the standard file extension for modern fortran source files.
The 90 refers to the first modern fortran standard in 1990.</p>

</div>

<p>To run your compiled program:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ./hello
Hello, World!
</code></pre></div></div>

<h2 id="variables">Variables</h2>

<p>Fortran comes with 5 built-in data types:</p>

<ul>
  <li><code class="highlighter-rouge">integer</code> – for data that represent whole numbers, positive or negative</li>
  <li><code class="highlighter-rouge">real</code> – for floating-point data (not a whole number)</li>
  <li><code class="highlighter-rouge">complex</code> – pair consisting of a real part and an imaginary part</li>
  <li><code class="highlighter-rouge">character</code> – for text data</li>
  <li><code class="highlighter-rouge">logical</code> – for data that represent boolean (true or false) values</li>
</ul>

<h3 id="declaring-variables">Declaring variables</h3>

<div class="aside-note">
    
    <p><strong>Note:</strong> Fortran is a <b>statically typed</b> language which means the type of each
variable is fixed when the program is compiled - variable types cannot change while the program is running.</p>

</div>

<p><strong>Example:</strong> variable declaration</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">variables</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">amount</span><span class="w">
  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">pi</span><span class="w">
  </span><span class="kt">complex</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">frequency</span><span class="w">
  </span><span class="kt">character</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">initial</span><span class="w">
  </span><span class="kt">logical</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">isOkay</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">variables</span><span class="w">
</span></code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> Fortran code is <strong>case-insensitive</strong>; you don’t have to worry about the
capitalisation of your variable names but it’s good practice to keep it consistent.</p>

</div>

<p>Note the additional statement at the beginning of the program: <code class="highlighter-rouge">implicit none</code>.
This statement tells the compiler that all variables will be explicitly declared; without 
this statement variables will be implicitly typed according to the letter they begin with.</p>

<div class="aside-important">
    
    <p><strong>Important:</strong> Always use the <code class="highlighter-rouge">implicit none</code> statement at
the beginning of each program and procedure. Implicit typing is considered bad practice in 
modern programming since it hides information leading to more program errors.</p>

</div>

<p><strong>Example:</strong> variable assignment</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.141592</span><span class="w">
  </span><span class="n">frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">-0.5</span><span class="p">)</span><span class="w">
  </span><span class="n">initial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'A'</span><span class="w">
  </span><span class="n">isOkay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">.false.</span><span class="w">
</span></code></pre></div></div>

<p>Characters are surrounded by either single (<code class="highlighter-rouge">'</code>) or double quotes (<code class="highlighter-rouge">"</code>).</p>

<p>Logical or boolean values can be either <code class="highlighter-rouge">.true.</code> or <code class="highlighter-rouge">.false.</code>.</p>

<div class="aside-important">
    
    <p><strong>Watch out</strong> for assignment at declaration: <code class="highlighter-rouge">integer :: amount = 1</code>. 
<strong>This is NOT a normal initialisation;</strong> it implies the <code class="highlighter-rouge">save</code> attribute which means that the variable retains
its value between procedure calls. Good practice is to initialise your variables separately to their declaration.</p>

</div>

<h3 id="floating-point-precision">Floating-point precision</h3>

<p>The desired floating-point precision can be explicitly declared using a <code class="highlighter-rouge">kind</code> parameter.
The <code class="highlighter-rouge">iso_fortran_env</code> intrinsic module provides kind parameters for the common 32bit and 64bit floating point types.</p>

<p><strong>Example:</strong> explicit real kind</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">float</span><span class="w">
  </span><span class="k">use</span><span class="p">,</span><span class="w"> </span><span class="k">intrinsic</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">iso_fortran_env</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">sp</span><span class="o">=&gt;</span><span class="n">real32</span><span class="p">,</span><span class="w"> </span><span class="n">dp</span><span class="o">=&gt;</span><span class="n">real64</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">real</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">float32</span><span class="w">
  </span><span class="kt">real</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">float64</span><span class="w">

  </span><span class="n">float32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0_sp</span><span class="w">       </span><span class="c1">! Explicit suffix for literal constants</span><span class="w">
  </span><span class="n">float64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0_dp</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">float</span><span class="w">
</span></code></pre></div></div>

<div class="aside-important">
    
    <p><strong>Important:</strong> Always use a <code class="highlighter-rouge">kind</code> suffix for floating point literal constants.</p>

</div>

<p><strong>Example:</strong> c-interoperable kinds</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">float</span><span class="w">
  </span><span class="k">use</span><span class="p">,</span><span class="w"> </span><span class="k">intrinsic</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">iso_c_binding</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">sp</span><span class="o">=&gt;</span><span class="n">c_float</span><span class="p">,</span><span class="w"> </span><span class="n">dp</span><span class="o">=&gt;</span><span class="n">c_double</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">real</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">float32</span><span class="w">
  </span><span class="kt">real</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">float64</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">float</span><span class="w">
</span></code></pre></div></div>

<h3 id="arrays">Arrays</h3>

<div class="aside-important">
    
    <p><strong>Important:</strong> Arrays in Fortran are <strong>one-based</strong> by default; this means
that the first element along any dimension is at index 1.</p>

</div>

<p><strong>Example:</strong> static array declaration</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">arrays</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="c1">! 1D integer array</span><span class="w">
  </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">dimension</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array1</span><span class="w">

  </span><span class="c1">! An equivalent array declaration</span><span class="w">
  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array2</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w">

  </span><span class="c1">! 2D real array</span><span class="w">
  </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">dimension</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array3</span><span class="w">

  </span><span class="c1">! Custom lower and upper index bounds</span><span class="w">
  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array4</span><span class="p">(</span><span class="mi">0</span><span class="p">:</span><span class="mi">9</span><span class="p">)</span><span class="w">
  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array5</span><span class="p">(</span><span class="mi">-5</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">arrays</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> array slicing</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">array_slice</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="w">
  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array1</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w">           </span><span class="c1">! 1D integer array of 10 elements</span><span class="w">
  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array2</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="w">        </span><span class="c1">! 2D integer array of 100 elements</span><span class="w">

  </span><span class="n">array1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="c1">! Array constructor</span><span class="w">
  </span><span class="n">array1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)]</span><span class="w">           </span><span class="c1">! Implied do loop constructor</span><span class="w">
  </span><span class="n">array1</span><span class="p">(:)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">                   </span><span class="c1">! set all elements to zero</span><span class="w">
  </span><span class="n">array1</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">                 </span><span class="c1">! set first five elements to one</span><span class="w">
  </span><span class="n">array1</span><span class="p">(</span><span class="mi">6</span><span class="p">:)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">                  </span><span class="c1">! set all elements after five to one</span><span class="w">
  
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="n">array1</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">)</span><span class="w">          </span><span class="c1">! print out elements at odd indices</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="n">array2</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)</span><span class="w">             </span><span class="c1">! print out the first column in a 2D array</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="n">array1</span><span class="p">(</span><span class="mi">10</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="mi">-1</span><span class="p">)</span><span class="w">         </span><span class="c1">! print an array in reverse</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">array_slice</span><span class="w">
</span></code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> Fortran arrays are stored in <strong>column major</strong> order; the first
index varies fastest.</p>

</div>

<p><strong>Example:</strong> allocatable (dynamic) arrays</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="k">allocatable</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">allocatable</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array1</span><span class="p">(:)</span><span class="w">
  </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">allocatable</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">array2</span><span class="p">(:,:)</span><span class="w">

  </span><span class="k">allocate</span><span class="p">(</span><span class="n">array1</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="w">
  </span><span class="k">allocate</span><span class="p">(</span><span class="n">array2</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span><span class="w">

  </span><span class="err">...</span><span class="w">

  </span><span class="k">deallocate</span><span class="p">(</span><span class="n">array1</span><span class="p">)</span><span class="w">
  </span><span class="k">deallocate</span><span class="p">(</span><span class="n">array2</span><span class="p">)</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="k">allocatable</span><span class="w">
</span></code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> Allocatable local arrays are deallocated automatically
when they go out of scope.</p>

</div>

<h3 id="character-strings">Character strings</h3>

<p><strong>Example:</strong> static character string</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">string</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">first_name</span><span class="w">
  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">last_name</span><span class="w">
  </span><span class="kt">character</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">full_name</span><span class="w">

  </span><span class="n">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'John'</span><span class="w">
  </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Smith'</span><span class="w">

  </span><span class="c1">! String concatenation</span><span class="w">
  </span><span class="n">full_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first_name</span><span class="p">//</span><span class="s1">' '</span><span class="p">//</span><span class="n">last_name</span><span class="w">

  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">full_name</span><span class="w"> 

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">string</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> allocatable character string</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">allocatable_string</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">character</span><span class="p">(:),</span><span class="w"> </span><span class="k">allocatable</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">first_name</span><span class="w">
  </span><span class="kt">character</span><span class="p">(:),</span><span class="w"> </span><span class="k">allocatable</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">last_name</span><span class="w">

  </span><span class="c1">! Explicit allocation statement</span><span class="w">
  </span><span class="k">allocate</span><span class="p">(</span><span class="kt">character</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">first_name</span><span class="p">)</span><span class="w">
  </span><span class="n">first_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'John'</span><span class="w">

  </span><span class="c1">! Allocation on assignment</span><span class="w">
  </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Smith'</span><span class="w">

  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">first_name</span><span class="p">//</span><span class="s1">' '</span><span class="p">//</span><span class="n">last_name</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">allocatable_string</span><span class="w">
</span></code></pre></div></div>

<h2 id="standard-input--output">Standard input / output</h2>

<p>We can use the <code class="highlighter-rouge">print</code> statement introduced earlier to print variable values to <code class="highlighter-rouge">stdout</code>:</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'The value of amount (integer) is: '</span><span class="p">,</span><span class="n">amount</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'The value of pi (real) is: '</span><span class="p">,</span><span class="n">pi</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'The value of frequency (complex) is: '</span><span class="p">,</span><span class="n">frequency</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'The value of initial (character) is: '</span><span class="p">,</span><span class="n">initial</span><span class="w">
  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'The value of isOkay (logical) is: '</span><span class="p">,</span><span class="n">isOkay</span><span class="w">
</span></code></pre></div></div>

<p>and the <code class="highlighter-rouge">read</code> statement to read values from <code class="highlighter-rouge">stdin</code>:</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">read_value</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">age</span><span class="w">

  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Please enter your age: '</span><span class="w">
  </span><span class="k">read</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">age</span><span class="w">

  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Your age is: '</span><span class="p">,</span><span class="n">age</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">read_value</span><span class="w">
</span></code></pre></div></div>

<h2 id="operators">Operators</h2>

<p>The usual set of arithmetic operators are available, listed in order or precedence:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operator  </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">**</code></td>
      <td>Exponent</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">*</code></td>
      <td>Multiplication</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">/ </code></td>
      <td>Division</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">+</code></td>
      <td>Addition</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">-</code></td>
      <td>Subtraction</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<div class="aside-important">
    
    <p><strong>Watch out</strong> for accidental integer division: <code class="highlighter-rouge">1/2</code> is equal to <code class="highlighter-rouge">0</code>
because both the numerator and denominator are integers.</p>

</div>

<p>To form a logical expression the following set of relational operators are available:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operator  </th>
      <th style="text-align: center">Alternative  </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">==</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">.eq.</code></td>
      <td>Tests for equality of two operands</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">/=</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">.ne.</code></td>
      <td>Test for inequality of two operands</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">&gt; </code></td>
      <td style="text-align: center"><code class="highlighter-rouge">.gt.</code></td>
      <td>Tests if left operand is strictly greater than right operand</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">&lt; </code></td>
      <td style="text-align: center"><code class="highlighter-rouge">.lt.</code></td>
      <td>Tests if left operand is strictly less than right operand</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">&gt;=</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">.ge.</code></td>
      <td>Tests if left operand is greater than or equal to right operand</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">&lt;=</code></td>
      <td style="text-align: center"><code class="highlighter-rouge">.le.</code></td>
      <td>Tests if left operand is less than or equal to right operand</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>as well as the following logical operators:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operator  </th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">.and.</code></td>
      <td>TRUE if both left and right operands are TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">.or.</code></td>
      <td>TRUE if either left or right or both operands are TRUE</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">.not.</code></td>
      <td>TRUE if right operand is FALSE</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">.eqv.</code></td>
      <td>TRUE if left operand has same logical value as right operand</td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="highlighter-rouge">.neqv.</code></td>
      <td>TRUE if left operand has the opposite logical value as right operand</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<!-- Fortran has many built-in math functions: -->

<h2 id="controlling-program-flow">Controlling program flow</h2>

<h3 id="conditional-construct-if">Conditional construct (<code class="highlighter-rouge">if</code>)</h3>

<p><strong>Example:</strong> single branch <code class="highlighter-rouge">if</code></p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">90.0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Angle is acute'</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> two-branch <code class="highlighter-rouge">if-else</code></p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">90.0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Angle is acute'</span><span class="w">
  </span><span class="k">else</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Angle is obtuse'</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> multi-branch  <code class="highlighter-rouge">if-elseif-else</code></p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">90.0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Angle is acute'</span><span class="w">
  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">180.0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Angle is obtuse'</span><span class="w">
  </span><span class="k">else</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Angle is reflex'</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
</span></code></pre></div></div>

<h3 id="loop-constructs-do">Loop constructs (<code class="highlighter-rouge">do</code>)</h3>

<p><strong>Example:</strong> <code class="highlighter-rouge">do</code> loop</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="w">
  </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> <code class="highlighter-rouge">do</code> loop with skip</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="w">
  </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="w">    
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w">   </span><span class="c1">! Print odd numbers</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> <code class="highlighter-rouge">do while</code> loop</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="w">
  </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="k">do</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">11</span><span class="p">)</span><span class="w">   
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w">
    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></code></pre></div></div>

<h2 id="procedures">Procedures</h2>

<p>Fortran has two forms of procedure:</p>

<ul>
  <li><strong>Subroutine:</strong> invoked by a <code class="highlighter-rouge">call</code> statement</li>
  <li><strong>Function:</strong> invoked within an expression or assignment to which it returns a value</li>
</ul>

<p>Both subroutines and functions have access to variables in the parent scope by <em>argument association</em>;
unless the <code class="highlighter-rouge">VALUE</code> attribute is specified, this is similar to call by reference.</p>

<h3 id="subroutines">Subroutines</h3>

<p>The subroutine input arguments, known as <em>dummy arguments</em> are specified in parentheses after the subroutine name;
the dummy argument types and attributes are declared within the body of the subroutine just like local variables.</p>

<p><strong>Example:</strong></p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">! Print matrix A to screen</span><span class="w">
</span><span class="k">subroutine</span><span class="w"> </span><span class="n">print_matrix</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">A</span><span class="p">)</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">n</span><span class="w">
  </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">m</span><span class="w">
  </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">A</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">)</span><span class="w">

  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="w">
  </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="w">
    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="n">A</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">:</span><span class="n">m</span><span class="p">)</span><span class="w">
  </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">print_matrix</span><span class="w">
</span></code></pre></div></div>

<p>Note the additional <code class="highlighter-rouge">intent</code> attribute when declaring the dummy arguments; this optional attribute signifies to the compiler whether the argument
is ‘read-only’ (<code class="highlighter-rouge">intent(in)</code>) ‘write-only’ (<code class="highlighter-rouge">intent(out)</code>) or ‘read-write’ (<code class="highlighter-rouge">intent(inout)</code>) within the procedure.
In this example, the subroutine does not modify its arguments, hence all arguments are <code class="highlighter-rouge">intent(in)</code>.</p>

<div class="aside-tip">
    
    <p><strong>Tip:</strong> It is good practice to always specify the <code class="highlighter-rouge">intent</code> attribute for
dummy arguments; this allows the compiler to check for unintentional errors and provides self-documentation.</p>

</div>

<p>We can call this subroutine from a program using a <code class="highlighter-rouge">call</code> statement:</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">call_sub</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  
  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">mat</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span><span class="w">
  
  </span><span class="n">mat</span><span class="p">(:,:)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w">

  </span><span class="k">call</span><span class="w"> </span><span class="n">print_matrix</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="n">mat</span><span class="p">)</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">call_sub</span><span class="w">
</span></code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> This example uses a so-called <em>explicit-shape</em> array argument since we have passed additional variables to describe
the dimensions of the array <code class="highlighter-rouge">A</code>; this will not be necessary if we place our subroutine in a module as described later.</p>

</div>

<h3 id="functions">Functions</h3>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">! L2 Norm of a vector</span><span class="w">
</span><span class="k">function</span><span class="w"> </span><span class="n">vector_norm</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">vec</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">norm</span><span class="p">)</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">
  </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">n</span><span class="w">
  </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">vec</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w">
  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">norm</span><span class="w">

  </span><span class="n">norm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vec</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">vector_norm</span><span class="w">
</span></code></pre></div></div>

<p>To execute this function:</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">run_fcn</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">v</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="w">
  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">vector_norm</span><span class="w">
  
  </span><span class="n">v</span><span class="p">(:)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="w">

  </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">'Vector norm = '</span><span class="p">,</span><span class="n">vector_norm</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="n">v</span><span class="p">)</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">run_fcn</span><span class="w">
</span></code></pre></div></div>

<div class="aside-tip">
    
    <p><strong>Tip:</strong> It is good programming practice for functions not to modify their arguments - <em>i.e.</em> all function arguments should be <code class="highlighter-rouge">intent(in)</code> - such
functions are known as <code class="highlighter-rouge">pure</code> functions. Use subroutines if your procedure needs to modify its arguments.</p>

</div>

<h2 id="modules">Modules</h2>

<p>Fortran modules contain definitions that are made accessible to programs, procedures and other modules through the <code class="highlighter-rouge">use</code> statement.
They can contain data objects, type definitions, procedures and interfaces.</p>

<ul>
  <li>Modules allow controlled scoping extension whereby entity access is made explicit</li>
  <li>Modules automatically generate explicit interfaces required for modern procedures</li>
</ul>

<div class="aside-tip">
    
    <p><strong>Tip:</strong> It is recommended to always place functions and subroutines
within modules.</p>

</div>

<p><strong>Example:</strong></p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span><span class="w"> </span><span class="n">my_mod</span><span class="w"> 
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="k">private</span><span class="w">                          </span><span class="c1">! All entities are module-private by default</span><span class="w">
  </span><span class="k">public</span><span class="w"> </span><span class="n">public_var</span><span class="p">,</span><span class="w"> </span><span class="n">print_matrix</span><span class="w">  </span><span class="c1">! Explicitly export public entities</span><span class="w">

  </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">public_var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">private_var</span><span class="w">

  </span><span class="k">contains</span><span class="w">
    
    </span><span class="c1">! Print matrix A to screen</span><span class="w">
    </span><span class="k">subroutine</span><span class="w"> </span><span class="n">print_matrix</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="w">
      </span><span class="kt">real</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="k">in</span><span class="p">)</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">A</span><span class="p">(:,:)</span><span class="w">  </span><span class="c1">! An assumed-shape dummy argument</span><span class="w">

      </span><span class="kt">integer</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">i</span><span class="w">
      </span><span class="k">do</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nb">size</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w">
        </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="n">A</span><span class="p">(</span><span class="n">i</span><span class="p">,:)</span><span class="w">
      </span><span class="k">end</span><span class="w"> </span><span class="k">do</span><span class="w">

    </span><span class="k">end</span><span class="w"> </span><span class="k">subroutine</span><span class="w"> </span><span class="n">print_matrix</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">my_mod</span><span class="w">
</span></code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> Compare this <code class="highlighter-rouge">print_matrix</code> subroutine with <a href="#subroutines">that written outside of a module</a>;
we no longer have to explicitly pass the matrix dimensions and can instead take
advantage of <em>assumed-shape</em> arguments since the module will generate the required
explicit interface for us. This results in a much simpler subroutine interface.</p>

</div>

<p>To <code class="highlighter-rouge">use</code> the module within a program:</p>
<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">program</span><span class="w"> </span><span class="n">use_mod</span><span class="w">
  </span><span class="k">use</span><span class="w"> </span><span class="n">my_mod</span><span class="w">
  </span><span class="k">implicit</span><span class="w"> </span><span class="k">none</span><span class="w">

  </span><span class="kt">real</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">mat</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="w">

  </span><span class="n">mat</span><span class="p">(:,:)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">public_var</span><span class="w">

  </span><span class="k">call</span><span class="w"> </span><span class="n">print_matrix</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span><span class="w">

</span><span class="k">end</span><span class="w"> </span><span class="k">program</span><span class="w"> </span><span class="n">use_mod</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> explicit import list</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="k">use</span><span class="w"> </span><span class="n">my_mod</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">public_var</span><span class="w">
</span></code></pre></div></div>

<p><strong>Example:</strong> aliased import</p>

<div class="language-fortran highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="k">use</span><span class="w"> </span><span class="n">my_mod</span><span class="p">,</span><span class="w"> </span><span class="k">only</span><span class="p">:</span><span class="w"> </span><span class="n">printMat</span><span class="o">=&gt;</span><span class="n">print_matrix</span><span class="w">
</span></code></pre></div></div>

<div class="aside-note">
    
    <p><strong>Note:</strong> Each module should be written in a separate .f90 source file. Modules need to be compiled prior to any program units that <code class="highlighter-rouge">use</code> them.</p>

</div>



    </div>

    <div class="col-narrow">
  <h3>News</h3>
  
    <table>
    
    
      <tr>
        <td><a href="fortran-lang.github.io/newsletter/2020/05/01/Fortran-Newsletter-May-2020/">Fortran newsletter: May 2020</a>&nbsp;&nbsp; </td>
        <td style="white-space: nowrap; text-align: right">01 May 2020</td>
      </tr>
      
    
      <tr>
        <td><a href="fortran-lang.github.io/newsletter/2020/04/18/Fortran-Webinar/">Open Source Directions Fortran webinar</a>&nbsp;&nbsp; </td>
        <td style="white-space: nowrap; text-align: right">18 Apr 2020</td>
      </tr>
      
    
      <tr>
        <td><a href="fortran-lang.github.io/newsletter/2020/04/06/Announcing-FortranCon-2020/">Announcing FortranCon 2020</a>&nbsp;&nbsp; </td>
        <td style="white-space: nowrap; text-align: right">06 Apr 2020</td>
      </tr>
      
    
      <tr>
        <td><a href="fortran-lang.github.io/newsletter/2020/02/28/J3-february-meeting/">J3 February 2020 Meeting</a>&nbsp;&nbsp; </td>
        <td style="white-space: nowrap; text-align: right">28 Feb 2020</td>
      </tr>
      
    
    </table>
    <p><a href="fortran-lang.github.io/news/archive">More…</a></p>

  <h3>What is Fortran?</h3>
<p>
Fortran is a high-performance parallel programming language
designed for scientific and engineering applications.
</p>

<p>
Visit the Fortran <a href="https://github.com/fortran-lang">GitHub</a>
page to explore the projects and get involved.
</p>


  <h3>Twitter</h3>
  <a href="https://twitter.com/fortranlang" class="twitter-follow-button" data-show-count="true" data-size="large">@fortranlang</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>



  <h3>RSS</h3>
  <p>
  RSS clients can follow the <a href="fortran-lang.github.io/news.xml">RSS feed</a>.
  </p>
</div>

  </div>
</section>


    <footer>
  <div class="container">
    <div class="col-wide">
    
      <a href="fortran-lang.github.io/learn/">Learn</a>
      
        &middot;
      
    
      <a href="fortran-lang.github.io/compilers/">Compilers</a>
      
        &middot;
      
    
      <a href="fortran-lang.github.io/packages">Packages</a>
      
        &middot;
      
    
      <a href="fortran-lang.github.io/news/">News</a>
      
    
    </div>

    <div class="col-narrow">
      This site's source is <a href="https://github.com/fortran-lang/fortran-lang.github.io/">hosted on GitHub</a>.
    </div>
  </div>
</footer>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
     

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
      feather.replace()
    </script>
  </body>
</html>
